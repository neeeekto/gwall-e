# Gwall-e Microservices Project

Проект состоит из 5 микросервисов, реализованных на Go с использованием DDD подхода:

1. host_task - управление задачами хостов
2. auto_healing - автоматическое восстановление сервисов
3. host_manager - управление хостами
4. scenario - управление сценариями
5. audio_logs - обработка аудио логов

## Приложения

Проект также включает приложения - автономные компоненты, работающие независимо от сервисов:

1. gwall-e-agent - приложение для управления хостами

Структура приложения:

```
apps/gwall-e-agent/cmd/main.go  # Точка входа
configs/                         # Конфигурационные файлы
internal/                        # Внутренняя логика агента
```

## Структура проекта

Каждый микросервис имеет следующую структуру:

```
services/[service_name]/cmd/main.go  # Точка входа
internal/domain/                # Доменные модели
internal/application/           # Слой приложения
internal/infrastructure/        # Инфраструктурный слой
pkg/                            # Общие пакеты
  - database/                   # Клиенты и утилиты для работы с БД
  - http/                       # HTTP middleware и клиенты
  - logging/                    # Централизованное логирование
  - config/                     # Загрузка конфигураций
configs/                        # Конфигурационные файлы
```

## Структура pkg для host_task

Сервис host_task имеет расширенную структуру pkg:

```
pkg/
  - utils/      # Общие утилиты (utils.go)
  - clients/    # Клиенты внешних сервисов (http_client.go)
  - config/     # Конфигурационные структуры (config.go)
  - helpers/    # Вспомогательные пакеты (validation.go)
```

## Запуск проекта

### Сборка
```bash
make build       # Сборка всех сервисов и приложений
make build-apps  # Сборка только приложений
```

### Запуск
```bash
make run       # Запуск всех сервисов и агентов
```

### Тестирование
```bash
make test      # Тестирование всех сервисов
```

### Запуск в Docker
```bash
docker-compose up